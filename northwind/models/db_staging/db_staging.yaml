version: 2

models:

  ###############################
  # CATEGORIES STAGING TABLE
  ###############################

  - name: stg_categories
    description: "Categories data from Northwind dataset"
    columns:
      - name: category_id
        description: "Primary key for categories"
        data_type: int
        
      - name: category_name
        description: "Name of the category"
        data_type: varchar(15)

      - name: description
        description: "Description of the category"
        data_type: text
      
      - name: picture
        description: "Image data for the category"
        data_type: bytea

  ###############################
  # INVENTORY STAGING TABLE
  ###############################

  - name: stg_inventory
    description: "Inventory data from the CDC products inventory"
    columns:
      - name: product_id
        description: "Product ID in the inventory"
        data_type: int

      - name: product_name
        description: "Name of the product"
        data_type: varchar(40)
      
      - name: supplier_id
        description: "ID of the product supplier"
        data_type: int
      
      - name: category_id
        description: "ID of the category to which the product belongs"
        data_type: int
      
      - name: quantity_per_unit
        description: "Quantity of the product per unit"
        data_type: varchar(20)
      
      - name: units_in_stock
        description: "Units of the product in stock"
        data_type: int

      - name: units_on_order
        description: "Units of the product currently on order"
        data_type: int

      - name: reorder_level
        data_type: int

      - name : dbt_updated_at
        data_type: timestamp

      - name : dbt_valid_from
        data_type: timestamp
      
      - name : dbt_valid_to
        data_type: timestamp

  ###############################
  # ORDER DETAILS STAGING TABLE
  ###############################

  - name: stg_order_details
    description: "Order details from Northwind dataset"
    columns:
      - name: order_id
        description: "ID of the order"
        data_type: int

      - name: product_id
        description: "ID of the product ordered"
        data_type: int

      - name: unit_price
        description: "Price per unit of the product"
        data_type: numeric

      - name: quantity
        description: "Quantity of the product ordered"
        data_type: int

      - name: discount
        description: "Discount applied to the order"
        data_type: numeric

  ###############################
  # ORDERS STAGING TABLE
  ###############################
  
  - name: stg_orders
    description: "Orders data from Northwind dataset"
    columns:
      - name: order_sk
        description: 'orders surrogate key, identifies order updates'
        data_type: text
        constraints:
          - type: primary_key
        tests:
          - not_null
          - unique
        
      - name: order_id
        description: "ID of the order"
        data_type: int
        
      - name: customer_id
        description: "ID of the customer placing the order"
        data_type: int

      - name: employee_id
        description: "ID of the employee processing the order"
        data_type: int

      - name: order_date
        description: "Date the order was placed"
        data_type: date
      
      - name: required_date
        description: "Date the order is required to be fulfilled"
        data_type: date
      
      - name: shipped_date
        description: "Date the order was shipped"
        data_type: date
      
      - name: ship_via
        data_type: int

      - name: freight
        data_type: numeric

      - name: ship_name
        data_type: varchar(40)

      - name: ship_address
        data_type: varchar(60)

      - name: ship_city
        data_type: varchar(15)

      - name: ship_region
        data_type: varchar(15)

      - name: ship_postal_code
        data_type: varchar(10)

      - name: ship_country
        data_type: varchar(15)

  ###############################
  # PRODUCTS STAGING TABLE
  ###############################

  - name: stg_products
    description: "Products data from Northwind dataset"
    columns:
      - name: product_id
        data_type: int
      
      - name: product_name
        data_type: varchar(40)
      
      - name: supplier_id
        data_type: int
      
      - name: category_id
        data_type: int
      
      - name: quantity_per_unit
        data_type: varchar(20)
      
      - name: unit_price
        data_type: numeric
      
      - name: discontinued
        data_type: BOOLEAN

  ###############################
  # SUPPLIERS STAGING TABLE
  ###############################

  - name: stg_suppliers
    description: "Suppliers data from Northwind dataset"
    columns:
      - name: supplier_id
        data_type: int

      - name: company_name
        data_type: text

      - name: contact_name
        data_type: text

      - name: contact_title
        data_type: text

      - name: address
        data_type: text

      - name: city
        data_type: text

      - name: region
        data_type: text

      - name: postal_code
        data_type: text

      - name: country
        data_type: text

      - name: phone
        data_type: text

      - name: fax
        data_type: text

      - name: homepage
        data_type: text